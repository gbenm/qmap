"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[521],{3905:(e,n,a)=>{a.d(n,{Zo:()=>c,kt:()=>d});var t=a(7294);function r(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function i(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),a.push.apply(a,t)}return a}function o(e){for(var n=1;n<arguments.length;n++){var a=null!=arguments[n]?arguments[n]:{};n%2?i(Object(a),!0).forEach((function(n){r(e,n,a[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(a,n))}))}return e}function s(e,n){if(null==e)return{};var a,t,r=function(e,n){if(null==e)return{};var a,t,r={},i=Object.keys(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||(r[a]=e[a]);return r}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)a=i[t],n.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=t.createContext({}),p=function(e){var n=t.useContext(l),a=n;return e&&(a="function"==typeof e?e(n):o(o({},n),e)),a},c=function(e){var n=p(e.components);return t.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),m=p(a),d=r,f=m["".concat(l,".").concat(d)]||m[d]||u[d]||i;return a?t.createElement(f,o(o({ref:n},c),{},{components:a})):t.createElement(f,o({ref:n},c))}));function d(e,n){var a=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=m;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return t.createElement.apply(null,o)}return t.createElement.apply(null,a)}m.displayName="MDXCreateElement"},2850:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var t=a(7462),r=(a(7294),a(3905));const i={sidebar_position:3},o="Funciones",s={unversionedId:"queries/functions",id:"queries/functions",title:"Funciones",description:"Debe declararlas en el qmapCreator, luego de esto",source:"@site/docs/queries/functions.md",sourceDirName:"queries",slug:"/queries/functions",permalink:"/qmap/docs/queries/functions",draft:!1,editUrl:"https://github.com/gbenm/qmap/tree/main/docs/docs/queries/functions.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Access",permalink:"/qmap/docs/queries/access"},next:{title:"Rename",permalink:"/qmap/docs/queries/rename"}},l={},p=[{value:"En general",id:"en-general",level:2},{value:"Funciones map",id:"funciones-map",level:2}],c={toc:p};function u(e){let{components:n,...a}=e;return(0,r.kt)("wrapper",(0,t.Z)({},c,a,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"funciones"},"Funciones"),(0,r.kt)("p",null,"Debe declararlas en el ",(0,r.kt)("inlineCode",{parentName:"p"},"qmapCreator"),", luego de esto\npuede utilizar el nombre de la funci\xf3n dentro de la query,\ndebe ser un identificador v\xe1lido, no es permitido utilizar\n",(0,r.kt)("inlineCode",{parentName:"p"},'""')," para el nombre de las funciones."),(0,r.kt)("h2",{id:"en-general"},"En general"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"El nombre que toma la key en el resultado, es la concatenaci\xf3n de los\nargumentos.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Las funciones se aplican sobre los valores en el JSON de entrada\n(no sobre los valores incluidos en el resultado)."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const query = `{\n    toString(id)\n}`\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Se pueden componer"),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const query = `{\n    upperCase(fullname(first_name, last_name)),\n}`\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Pueden utilizar variables (los primitivos no se permiten,\nsi necesita mandar informaci\xf3n externa, utilice variables,\ntampoco es permitido utilizar ",(0,r.kt)("inlineCode",{parentName:"p"},'""')," para el nombre de variables) estas\nse mandan atrav\xe9s de ",(0,r.kt)("inlineCode",{parentName:"p"},"qmap")," o ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"const query = `{\n    take(members, @quantity)\n}`\n\nqmap(query, {\n    variables: {\n        quantity: 5\n    }\n})\n")))),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Las variables se declaran con un ",(0,r.kt)("inlineCode",{parentName:"p"},"@")," al inicio, seguido de un identificador.\n",(0,r.kt)("strong",{parentName:"p"},"No")," puede usar comillas ",(0,r.kt)("inlineCode",{parentName:"p"},'""')))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Pueden usarse dentro de la selecci\xf3n, sin embargo esto limita la informaci\xf3n\nque puede utilizar a la que existe dentro de la clave en el JSON\nde entrada. Tambi\xe9n es permitido utilizar ",(0,r.kt)("strong",{parentName:"p"},"selecci\xf3n")," y\n",(0,r.kt)("strong",{parentName:"p"},"acceso")," como argumentos."),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const query = `{\n    product {\n        upperCase(provider.name)\n    },\n    transaction {\n        calcTotal(products {\n            price\n        })\n    }\n}`\n"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Queda en responsabilidad del desarrollador controlar\nerrores en las funciones, ya que la funci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"apply")," podr\xeda\nfallar, tambi\xe9n se debe tener en cuenta que los argumentos\npueden ser ",(0,r.kt)("inlineCode",{parentName:"p"},"null"),".")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"No se transforma la salida de la funci\xf3n, es decir que\npuede devolver ",(0,r.kt)("inlineCode",{parentName:"p"},"undefined")," si lo desea.")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"Las funciones deben ser s\xedncronas, pero podr\xeda ser \xfatil\nposteriormente agregar as\xedncronas."))),(0,r.kt)("h2",{id:"funciones-map"},"Funciones map"),(0,r.kt)("p",null,"Por defecto las funciones toman el objeto, es decir\nque se ejecutar\xeda una sola vez y como argumento tendr\xeda el array,\npara ejecutar la funci\xf3n por cada elemento debe llamar\nsu funci\xf3n de esta manera:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const query = `{\n    [ upperCase(products.name) ]\n}`\n\nconst input = {\n  products: [\n    { name: \"pencil\" },\n    { name: \"paper\" },\n  ],\n}\n\nconst result = {\n  products_name: [ 'PENCIL', 'PAPER' ]\n}\n")),(0,r.kt)("p",null,"Al encerrar la funci\xf3n en corchetes ",(0,r.kt)("inlineCode",{parentName:"p"},"[]")," se indica\nque se debe aplicar a cada elemento en el arreglo."),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Puede utilizar la composici\xf3n (se pueden componer funciones\npor elemento y normales):")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},"const query = `{\n    take([ currency([ add(ids, offset) ]) ], @quantity)\n}`\n\nconst input = {\n    offset: 100,\n    ids: [1, 2, 3, 4, 5],\n}\n\nconst result = {\n  ids_offset_quantity: [ '$101.00', '$102.00', '$103.00' ]\n}\n")),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Con la notaci\xf3n ",(0,r.kt)("inlineCode",{parentName:"p"},"[]")," se asume que el primer argumento es\narray, los dem\xe1s deben ser valores globales, es decir,\nque est\xe9n en el scope de la clave en el JSON de entrada\no bien ser variables. Aunque los dem\xe1s valores sean\narreglos ser\xe1n tratados como argumentos \xfanicos."))))}u.isMDXComponent=!0}}]);